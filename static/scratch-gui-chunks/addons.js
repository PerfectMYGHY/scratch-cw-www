(window.webpackJsonpGUI=window.webpackJsonpGUI||[]).push([[77],{1390:function(e,t,n){"use strict";n.d(t,"b",(function(){return u})),n.d(t,"e",(function(){return b})),n.d(t,"c",(function(){return f})),n.d(t,"d",(function(){return y})),n.d(t,"a",(function(){return k})),n.d(t,"g",(function(){return _})),n.d(t,"f",(function(){return E}));var s=n(366);let o,r=!1,a=new WeakMap,i=!1,c=null;const l=new s.a;let d=Promise.resolve();const u=()=>r,p=e=>{if(e.updateMonitor||a.has(e))return;const t={time:o.runtime.currentMSecs,status:e.status};a.set(e,t),e.status=1},g=e=>{if(4===e.status)return;const t=a.get(e);t&&1!==e.status&&(t.status=e.status,e.status=1)},h=e=>{c=e},m=(e,t)=>{e.timer&&(e.timer.startTime+=o.runtime.currentMSecs-t.time);const n=e.peekStackFrame();n&&n.executionContext&&n.executionContext.timer&&(n.executionContext.timer.startTime+=o.runtime.currentMSecs-t.time)},b=e=>{const t=r!==e;if(t&&(r=e,l.dispatchEvent(new CustomEvent("change"))),r){d=d.then((()=>o.runtime.audioEngine.audioContext.suspend())),o.runtime.ioDevices.clock._paused||o.runtime.ioDevices.clock.pause(),o.runtime.threads.forEach(p);const e=o.runtime.sequencer.activeThread;e&&(h(e),l.dispatchEvent(new CustomEvent("step")))}if(!r&&t){d=d.then((()=>o.runtime.audioEngine.audioContext.resume())),o.runtime.ioDevices.clock.resume();for(const e of o.runtime.threads){const t=a.get(e);t&&(m(e,t),e.status=t.status)}a=new WeakMap;(e=>{const t=o.runtime.threads,n=w(e);if(-1!==n)for(let e=n;e<t.length;e++){const n=t[e],s=n.status;0!==s&&2!==s&&3!==s||(o.runtime.sequencer.activeThread=n,o.runtime.sequencer.stepThread(n))}})(c),c=null}},f=e=>{l.addEventListener("change",(()=>e(r)))},y=e=>{l.addEventListener("step",e)},k=()=>c,v=e=>{const t=a.get(e);return t?t.status:e.status},w=e=>e?o.runtime.threads.findIndex((t=>t.target===e.target&&t.topBlock===e.topBlock&&t.stackClick===e.stackClick&&t.updateMonitor===e.updateMonitor)):-1,M=e=>{const t=o.runtime.threads;for(let n=e;n<t.length;n++){const e=t[n];if(e.updateMonitor)continue;if(e.isCompiled)continue;const s=v(e);if(0===s||2===s||3===s)return p(e),e}return null},_=()=>{if(c){const e=a.get(c);m(c,e),e.time=o.runtime.currentMSecs;(e=>{if(4===e.status)return!1;if(e.isCompiled)return!1;const t=e.peekStack();if(!t&&(e.popStack(),0===e.stack.length))return e.status=4,!1;i=!0,o.runtime.sequencer.activeThread=e;const n=["special error used by Scratch Addons for implementing single-stepping"];Object.defineProperty(e,"blockGlowInFrame",{set(e){throw n}});try{e.status=0,e.warpTimer&&e.warpTimer.start();try{o.runtime.sequencer.stepThread(e)}catch(e){if(e!==n)throw e}if(0!==e.status)return!1;for(e.peekStack()===t&&e.goToNextBlock();!e.peekStack();){if(e.popStack(),0===e.stack.length)return e.status=4,!1;const t=e.peekStackFrame();if(t.isLoop){if(e.peekStackFrame().warpMode)continue;return!1}if(t.waitingReporter)return!1;e.goToNextBlock()}return!0}finally{i=!1,o.runtime.sequencer.activeThread=null,Object.defineProperty(e,"blockGlowInFrame",{value:t,configurable:!0,enumerable:!0,writable:!0}),4!==e.status&&(e.status=1)}})(c)||(c=M(w(c)+1))}if(!c){h(M(0)),o.runtime.ioDevices.clock._pausedTime+=o.runtime.currentStepTime;const e=o.runtime.audioEngine.audioContext;for(const t of o.runtime.targets)for(const n of Object.keys(t.sprite.soundBank.soundPlayers)){const s=t.sprite.soundBank.soundPlayers[n];s.outputNode&&(s.outputNode.stop(e.currentTime),s._createSource(),s.outputNode.start(e.currentTime,e.currentTime-s.startingUntil+o.runtime.currentStepTime/1e3),s.startingUntil-=o.runtime.currentStepTime/1e3)}for(const e of o.runtime.threads)a.has(e)&&(a.get(e).time+=o.runtime.currentStepTime);i=!0;const t=o.runtime._hats;for(const e in t){if(!Object.prototype.hasOwnProperty.call(t,e))continue;t[e].edgeActivated&&o.runtime.startHats(e)}i=!1}l.dispatchEvent(new CustomEvent("step"))},E=e=>{if(o)return;o=e.tab.traps.vm;const t=o.runtime.sequencer.stepThreads;o.runtime.sequencer.stepThreads=function(){if(u())for(const e of this.runtime.threads)g(e);return t.call(this)};const n=o.runtime.greenFlag;o.runtime.greenFlag=function(){return b(!1),n.call(this)};const s=o.runtime.startHats;o.runtime.startHats=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const o=t[0],a="event_whenbroadcastreceived"===o||"control_start_as_clone"===o;if(i){if(!a&&!this.getIsEdgeActivatedHat(o))return[];const e=s.apply(this,t);for(const t of e)p(t);return e}return r&&!a?[]:s.apply(this,t)};const c=o.runtime._getMonitorThreadCount;o.runtime._getMonitorThreadCount=function(e){let t=c.call(this,e);if(r)for(const n of e)a.has(n)&&t++;return t}}},1395:function(e,t,n){"use strict";function s(e){return{r:parseInt(e.substring(1,3),16),g:parseInt(e.substring(3,5),16),b:parseInt(e.substring(5,7),16),a:e.length>=9?parseInt(e.substring(7,9),16)/255:1}}function o(e){return 1===(e=Math.round(e).toString(16)).length?"0".concat(e):e}function r(e){const t=o(e.r),n=o(e.g),s=o(e.b),r=void 0!==e.a?o(255*e.a):"";return"#".concat(t).concat(n).concat(s).concat(r)}function a(e){let{r:t,g:n,b:s}=e;t/=255,n/=255,s/=255;const o=Math.max(t,n,s),r=o-Math.min(t,n,s);if(0===r)return{h:0,s:0,v:o};const a=(o-t)/r,i=(o-n)/r,c=(o-s)/r;let l;a?i?c||(l=4+i-a):l=2+a-c:l=c-i;return{h:60*l%360,s:r/o,v:o}}function i(e){const{r:t,g:n,b:o}=s(e);return.299*t+.587*n+.114*o}function c(e,t,n,s){return"number"!=typeof(s=void 0!==s?s:170)&&(s=i(s)),i(e)>s?void 0!==t?t:"#575e75":void 0!==n?n:"#ffffff"}function l(e,t){const{r:n,g:o,b:a,a:i}=s(e);return void 0===t.r&&(t.r=1),void 0===t.g&&(t.g=1),void 0===t.b&&(t.b=1),void 0===t.a&&(t.a=1),r({r:t.r*n,g:t.g*o,b:t.b*a,a:t.a*i})}function d(e,t){const{r:n,g:o,b:a,a:i}=s(e);return void 0===t.r&&(t.r=1),void 0===t.g&&(t.g=1),void 0===t.b&&(t.b=1),void 0===t.a&&(t.a=1),r({r:255*(1-t.r)+t.r*n,g:255*(1-t.g)+t.g*o,b:255*(1-t.b)+t.b*a,a:1-t.a+t.a*i})}function u(e,t){const{r:n,g:o,b:a}=s(e),{r:i,g:c,b:l,a:d}=s(t);return r({r:(1-d)*n+d*i,g:(1-d)*o+d*c,b:(1-d)*a+d*l})}function p(e){return e.substring(0,7)}function g(e,t,n){return r(function(e){let{h:t,s:n,v:s}=e;if(0===n)return{r:255*s,g:255*s,b:255*s};t%=360,t<0&&(t+=360);const o=t/60,r=Math.floor(o),a=s*(1-n*(1-o+r)),i=s*(1-n*(o-r)),c=s*(1-n);switch(r){case 0:return{r:255*s,g:255*a,b:255*c};case 1:return{r:255*i,g:255*s,b:255*c};case 2:return{r:255*c,g:255*s,b:255*a};case 3:return{r:255*c,g:255*i,b:255*s};case 4:return{r:255*a,g:255*c,b:255*s};case 5:return{r:255*s,g:255*c,b:255*i}}}({h:"number"==typeof e?e:a(s(e)).h,s:"number"!=typeof e&&0===a(s(e)).s?0:"number"==typeof t?t:a(s(t)).s,v:"number"==typeof n?n:a(s(n)).v}))}function h(e){const{r:t,g:n,b:o}=s(e);return"url(\"data:image/svg+xml,\n    <svg xmlns='http://www.w3.org/2000/svg'>\n      <filter id='recolor'>\n        <feColorMatrix color-interpolation-filters='sRGB' values='\n          0 0 0 0 ".concat(t/255,"\n          0 0 0 0 ").concat(n/255,"\n          0 0 0 0 ").concat(o/255,"\n          0 0 0 1 0\n        '/>\n      </filter>\n    </svg>#recolor\n  \")").split("\n").join("")}n.d(t,"e",(function(){return s})),n.d(t,"h",(function(){return c})),n.d(t,"d",(function(){return l})),n.d(t,"b",(function(){return d})),n.d(t,"a",(function(){return u})),n.d(t,"g",(function(){return p})),n.d(t,"c",(function(){return g})),n.d(t,"f",(function(){return h}))},1399:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var s=n(1402);class o{static flash(e){r.timerID>0&&(clearTimeout(r.timerID),r.block.svgPath_&&(r.block.svgPath_.style.fill=""));let t=4,n=!0;r.block=e,function e(){r.block.svgPath_&&(r.block.svgPath_.style.fill=n?"#ffff80":""),n=!n,t--,t>0?r.timerID=setTimeout(e,200):(r.timerID=0,r.block=null)}()}}const r={block:null,timerID:null};let a=[],i=[];class c{constructor(e){this.addon=e,this.addon.tab.traps.getBlockly().then((e=>{this.blockly=e})),this.vm=this.addon.tab.traps.vm,this.offsetX=32,this.offsetY=32,this.navigationHistory=new l,this._workspace=null}getEditingTarget(){return this.vm.runtime.getEditingTarget()}setEditingTarget(e){this.getEditingTarget().id!==e&&this.vm.setEditingTarget(e)}getWorkspace(){const e=Blockly.getMainWorkspace();return e.getToolbox()&&(this._workspace=e),this._workspace}scrollBlockIntoView(e){var t;let n,r=this.getWorkspace();if(e instanceof s.a?(this.setEditingTarget(e.targetId),n=r.getBlockById(e.id)):n=e&&e.id?e:r.getBlockById(e),!n)return;let a=n.getRootBlock(),i=this.getTopOfStackFor(n).getRelativeToSurfaceXY(),c=a.getRelativeToSurfaceXY(),l=r.scale,d=c.x*l,u=i.y*l,p=n.width+d,g=n.height+u,h=r.getMetrics();if(d<h.viewLeft+this.offsetX-4||p>h.viewLeft+h.viewWidth||u<h.viewTop+this.offsetY-4||g>h.viewTop+h.viewHeight){let e=d-h.contentLeft-this.offsetX,t=u-h.contentTop-this.offsetY;this.navigationHistory.storeView(this.navigationHistory.peek(),64),r.scrollbar.set(e,t),this.navigationHistory.storeView({left:e,top:t},64)}null===(t=this.blockly)||void 0===t||t.hideChaff(),o.flash(n)}getTopOfStackFor(e){let t=e;for(;t.getOutputShape()&&t.getSurroundParent();)t=t.getSurroundParent();return t}}class l{storeView(e,t){i=[];let n=Blockly.getMainWorkspace().getMetrics(),s={left:n.viewLeft,top:n.viewTop};(!e||d(s,e)>t)&&a.push(s)}peek(){return a.length>0?a[a.length-1]:null}goBack(){const e=Blockly.getMainWorkspace(),t=e.getMetrics();let n={left:t.viewLeft,top:t.viewTop},s=this.peek();if(!s)return;if(d(n,s)<64&&a.length>1&&(a.pop(),i.push(s)),s=this.peek(),!s)return;let o=s.left-t.contentLeft,r=s.top-t.contentTop;e.scrollbar.set(o,r)}goForward(){let e=i.pop();if(!e)return;a.push(e);let t=Blockly.getMainWorkspace(),n=t.getMetrics(),s=e.left-n.contentLeft,o=e.top-n.contentTop;t.scrollbar.set(s,o)}}function d(e,t){return Math.sqrt(Math.pow(e.left-t.left,2)+Math.pow(e.top-t.top,2))}},1401:function(e){e.exports=JSON.parse('{"editor-devtools/clean-plus":"整理积木","editor-devtools/copy-all":"复制全部","editor-devtools/copy-block":"复制积木","editor-devtools/cut-block":"剪下积木","editor-devtools/lists":"列表","editor-devtools/make-space":"腾出空间","editor-devtools/orphaned":"{count,plural,other {要删除#个单独存在的积木吗？} }","editor-devtools/paste":"粘贴","editor-devtools/replace":"将这个角色上的变量{name}全部替换成: ","editor-devtools/swap":"替换角色中的所有{var}","editor-devtools/unused-list":"{count,plural,other {要删除#个没有用到的列表吗？这些列表包含: \\n} }","editor-devtools/unused-var":"{count,plural,other {要删除#个没有用到的变量吗？这些变量包含: \\n} }","editor-devtools/var-not-exist":"这个变量不存在…","editor-devtools/variables":"变量","find-bar/find-placeholder":"查找（Ctrl+F）","find-bar/complex-broadcast":"(表示)","find-bar/event":"当接收到或发送 {name} 时","find-bar/list-global":"全局列表 {name}","find-bar/list-local":"局部列表 {name}","find-bar/var-global":"全局变量 {name}","find-bar/var-local":"局部变量 {name}","_general/blocks/green-flag":"绿旗","middle-click-popup/start-typing":"开始打字…","editor-searchable-dropdowns/createBroadcast":"建立广播信息{name}","editor-searchable-dropdowns/createGlobalList":"建立全局列表{name}","editor-searchable-dropdowns/createGlobalVariable":"建立全局变量{name}","editor-searchable-dropdowns/createLocalList":"建立区域列表{name}","editor-searchable-dropdowns/createLocalVariable":"建立区域变量{name}","data-category-tweaks-v2/for-all-sprites":"适用于所有角色: ","data-category-tweaks-v2/for-this-sprite-only":"仅适用于当前角色: ","data-category-tweaks-v2/list-category":"列表","hide-flyout/lock":"固定工具箱","hide-flyout/unlock":"取消固定工具箱","mediarecorder/cancel":"取消","mediarecorder/click-flag":"正在等待…","mediarecorder/click-flag-description":"点击绿旗就会开始录制,点击这个按钮可以停止。","mediarecorder/option-title":"录制设定","mediarecorder/record-description":"将录制为{extension}文件。录制完成后，您可以将其保存到计算机中。\\n注意：变量和列表监视器将不可见。","mediarecorder/record-after-flag":"在绿旗被点击时才开始录制","mediarecorder/record-audio":"包含项目的声音","mediarecorder/record-audio-description":"这不包括文字转语音的声音。","mediarecorder/record-duration":"录制时长（秒）","mediarecorder/record-mic":"包含来自麦克风的声音","mediarecorder/record-until-stop":"在停止项目运行时也停止录制","mediarecorder/record-until-stop-disabled":"你必须启用「{afterFlagOption}」才可以设定这个项目。","mediarecorder/record":"录制","mediarecorder/start":"开始","mediarecorder/start-delay":"开始时延迟（秒）","mediarecorder/starting-in":"录像倒数{secs}…","mediarecorder/stop":"停止录像","debugger/block-breakpoint":"断点","debugger/block-error":"错误%s","debugger/block-log":"记录%s","debugger/block-warn":"警告%s","debugger/cannot-pause-player":"断点积木只能在编辑器中使用。","debugger/clear":"清除","debugger/clone-of":"{sprite}的克隆体","debugger/close":"关闭","debugger/console":"纪录","debugger/debug":"调试","debugger/empty-string":"（空字符串）","debugger/enter-format":"输入导出格式: ","debugger/export":"导出","debugger/export-desc":"按住Shift键并点击以自定义导出格式","debugger/icon-error":"错误","debugger/icon-warn":"警告","debugger/log-msg-broadcasted":"广播了信息{broadcast}","debugger/log-msg-clone-cap":"创建{sprite}的克隆体时失败,克隆体的创建不能超过300个。","debugger/log-msg-clone-created":"建立了{sprite}的克隆体。","debugger/log-msg-flag-clicked":"绿旗被点击。","debugger/no-logs":"没有可显示的纪录。","debugger/no-threads-running":"没有运行中的线程。","debugger/performance-clonecount-graph-tooltip":"克隆体: {clones}","debugger/performance-clonecount-title":"克隆体","debugger/performance-framerate-graph-tooltip":"帧率: {fps}","debugger/performance-framerate-title":"帧率","debugger/step":"步进","debugger/step-desc":"执行一个积木","debugger/tab-logs":"纪录","debugger/tab-performance":"性能","debugger/tab-threads":"线程","debugger/thread":"线程{id}","debugger/unknown-sprite":"（未知角色）","debugger/unpause":"继续","pause/pause":"暂停","clones/clones":"克隆体个数: {cloneCount}","color-picker/hex":"hex色码","remove-sprite-confirm/confirm":"确定要删除这个角色？","block-count/blocks":"{num,plural,other {#个程序积木}}","onion-skinning/behind":"在后面","onion-skinning/front":"在前面","onion-skinning/layering":"图层排列","onion-skinning/merge":"合并","onion-skinning/mode":"显示模式","onion-skinning/next":"下一个造型","onion-skinning/opacity":"透明度（%）","onion-skinning/opacityStep":"透明渐进（%）","onion-skinning/previous":"上一个造型","onion-skinning/settings":"描图纸设定","onion-skinning/tint":"染色","onion-skinning/toggle":"描图纸显示切换","paint-snap/off":"关","paint-snap/on":"开","paint-snap/boxCenter":"选择中心","paint-snap/boxCorners":"选择角落","paint-snap/boxEdgeMids":"选择边缘中线","paint-snap/objectCenters":"对象中间","paint-snap/objectCorners":"对象的角落","paint-snap/objectEdges":"对象的边缘","paint-snap/objectMidlines":"对象的中线","paint-snap/pageAxes":"页面的X和Y轴","paint-snap/pageCenter":"页面最中间","paint-snap/pageCorners":"页面的角落","paint-snap/pageEdges":"页面的边缘","paint-snap/settings":"捕捉中心","paint-snap/snapFrom":"捕捉来自:","paint-snap/snapTo":"捕捉到:","paint-snap/threshold":"捕捉距离","paint-snap/toggle":"切换捕捉","2d-color-picker/shade":"阴影","better-img-uploads/upload":"高清图片上传","variable-manager/for-all-sprites":"所有角色使用的变量","variable-manager/for-this-sprite":"仅这个角色使用的变量","variable-manager/search":"搜寻","variable-manager/variables":"变量","search-sprites/placeholder":"搜寻角色…","gamepad/axes-a-b":"轴{a}与{b}","gamepad/axis-arrows":"方向键","gamepad/axis-cursor":"鼠标光标","gamepad/axis-custom":"自定义","gamepad/axis-none":"无","gamepad/browser-support":"这个浏览器和操作系统有些已知错误,可能使这个插件难以使用,如果你碰到了一些问题,请试试其它的浏览器。","gamepad/button-n":"按钮{n}","gamepad/clear":"清空所有控制设置","gamepad/config-header":"这个注释包含第三方工具或网站（如https://turbowarp.org/）中的游戏手柄配置。\\n请勿手动修改","gamepad/key-click":"点击","gamepad/key-down":"向下键","gamepad/key-enter":"Enter键","gamepad/key-left":"向左键","gamepad/key-none":"（无）","gamepad/key-right":"向右键","gamepad/key-space":"空白键","gamepad/key-up":"向上键","gamepad/keyinput-title":"点击并按下一个键或单击更改按钮。ESC键可取消。返回键或Delete键可删除。","gamepad/no-controllers":"未检测到游戏手柄,请在连接后再按一次按钮。","gamepad/reset":"重设所有控制设置到项目预设值","gamepad/settings":"游戏手柄设置","folders/add-to-folder":"放进文件夹: {folder}","folders/closed-folder":"文件夹","folders/confirm-backpack-folder":"将整个文件夹放进背包？","folders/create-folder":"创建文件夹","folders/name-not-allowed":"无效的文件夹名称","folders/name-prompt":"文件夹名称: ","folders/name-prompt-title":"创建文件夹","folders/open-folder":"已开启","folders/remove-folder":"移除文件夹","folders/remove-from-folder":"移出文件夹","folders/rename-folder":"更名文件夹","folders/rename-folder-prompt":"将文件夹重新命名为: ","folders/rename-folder-prompt-title":"重新命名文件夹","block-switching/control_forever":"重复无限次","block-switching/control_if":"如果","block-switching/control_if_else":"如果…否则","block-switching/control_repeat_until":"等待直到","block-switching/control_wait_until":"等待直到","block-switching/data_changevariableby":"变量改变","block-switching/data_deletealloflist":"删除所有","block-switching/data_deleteoflist":"删除项","block-switching/data_hidelist":"列表隐藏","block-switching/data_hidevariable":"变量隐藏","block-switching/data_insertatlist":"插入项目","block-switching/data_replaceitemoflist":"替换项目","block-switching/data_setvariableto":"变量设为","block-switching/data_showlist":"列表显示","block-switching/data_showvariable":"变量显示","block-switching/debugger_error":"错误","block-switching/debugger_log":"纪录","block-switching/debugger_warn":"警告","block-switching/event_broadcast":"广播信息","block-switching/event_broadcastandwait":"广播信息并等待","block-switching/looks_backdropnumbername":"背景编号或名称","block-switching/looks_changeeffectby":"图象效果改变","block-switching/looks_changesizeby":"尺寸改变","block-switching/looks_costumenumbername":"造型编号或名称","block-switching/looks_goforwardbackwardlayers":"向前或向后一层","block-switching/looks_gotofrontback":"移到最前或最后一层","block-switching/looks_hide":"隐藏","block-switching/looks_nextbackdrop":"背景换成下一个","block-switching/looks_nextcostume":"造型换成下一个","block-switching/looks_say":"说出","block-switching/looks_sayforsecs":"说出持续","block-switching/looks_seteffectto":"图象效果设为","block-switching/looks_setsizeto":"尺寸设为","block-switching/looks_show":"显示","block-switching/looks_switchbackdropto":"背景换成","block-switching/looks_switchbackdroptoandwait":"背景换成并等待","block-switching/looks_think":"想着","block-switching/looks_thinkforsecs":"想着持续","block-switching/motion_changexby":"x改变","block-switching/motion_changeyby":"y改变","block-switching/motion_setx":"x设为","block-switching/motion_sety":"y设为","block-switching/motion_turnleft":"左转","block-switching/motion_turnright":"右转","block-switching/motion_xposition":"x坐标","block-switching/motion_yposition":"y坐标","block-switching/music_changeTempo":"演奏速度改变","block-switching/music_setTempo":"演奏速度设为","block-switching/operator_add":"+","block-switching/operator_and":"且","block-switching/operator_divide":"/","block-switching/operator_equals":"=","block-switching/operator_gt":">","block-switching/operator_lt":"<","block-switching/operator_mod":"取余数","block-switching/operator_multiply":"*","block-switching/operator_or":"或","block-switching/operator_subtract":"-","block-switching/pen_changePenColorParamBy":"参数改变","block-switching/pen_changePenHueBy":"颜色改变","block-switching/pen_changePenShadeBy":"阴影改变","block-switching/pen_changePenSizeBy":"笔迹宽度改变","block-switching/pen_penDown":"下笔","block-switching/pen_penUp":"停笔","block-switching/pen_setPenColorParamTo":"参数设为","block-switching/pen_setPenHueToNumber":"颜色设为","block-switching/pen_setPenShadeToNumber":"阴影设为","block-switching/pen_setPenSizeTo":"笔迹宽度设为","block-switching/sensing_coloristouchingcolor":"颜色碰到颜色","block-switching/sensing_mousex":"鼠标的x","block-switching/sensing_mousey":"鼠标的y","block-switching/sensing_touchingcolor":"碰到颜色","block-switching/sound_changeeffectby":"声音效果改变","block-switching/sound_changevolumeby":"音量改变","block-switching/sound_play":"播放音效","block-switching/sound_playuntildone":"播放音效直到结束","block-switching/sound_seteffectto":"声音效果设为","block-switching/sound_setvolumeto":"音量设为","copy-reporter/copy-to-clipboard":"复制","copy-reporter/copy-value":"复制值","blocks2image/error_blocks_not_added":"添加积木到编辑区！","blocks2image/export_all_to_PNG":"导出全部积木成PNG图象","blocks2image/export_all_to_SVG":"导出全部积木成SVG图象","blocks2image/export_selected_to_PNG":"导出积木成PNG图象","blocks2image/export_selected_to_SVG":"导出积木成SVG图象","editor-extra-keys/enter-key":"Enter","move-to-top-bottom/bottom":"移至最下面","move-to-top-bottom/top":"移至最上面","rename-broadcasts/RENAME_BROADCAST":"重新命名信息","rename-broadcasts/RENAME_BROADCAST_MODAL_TITLE":"重新命名信息","rename-broadcasts/RENAME_BROADCAST_TITLE":"将所有“{name}”消息重命名为：","swap-local-global/cant-convert-cloud":"无法转换,云端变量不能被转换成「仅适用当前角色」。","swap-local-global/cant-convert-conflict":"无法转换,因为会和其它角色中相同名称的变量冲突：{sprites}","swap-local-global/cant-convert-stage":"舞台不能有「仅适用当前角色」的变量。","swap-local-global/cant-convert-to-local":"无法转换,因为有其它角色也在使用这个变量：{sprites}","swap-local-global/cant-convert-used-elsewhere":"无法转换,因为有另一个角色也在使用这个变量：{sprite}","swap-local-global/edit":"编辑属性：","swap-local-global/edit-list-header":"编辑列表","swap-local-global/edit-list-option":"编辑列表","swap-local-global/edit-variable-header":"编辑变量","swap-local-global/edit-variable-option":"编辑变量","swap-local-global/to-global":"转换成「适用于所有角色」","swap-local-global/to-local":"转换成「仅适用当前角色」","hide-stage/hide-stage":"隐藏舞台"}')},1402:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));class s{constructor(e,t){this.targetId=e.id,this.id=t.id}}},1403:function(e,t,n){"use strict";n.d(t,"f",(function(){return c})),n.d(t,"a",(function(){return l})),n.d(t,"b",(function(){return d})),n.d(t,"e",(function(){return u})),n.d(t,"d",(function(){return p})),n.d(t,"c",(function(){return g})),n.d(t,"g",(function(){return m}));let s=!1,o=null,r=1,a=1;const i=[],c=e=>{o?o.value=e:a=e,i.forEach((e=>e()))},l=()=>o?o.value:a,d=()=>0===l(),u=e=>{r=e},p=e=>{e?(u(l()),c(0)):c(r)},g=e=>{i.push(e)},h=e=>{e?(o=e.inputNode.gain,o.value=a):console.error("could not get audio engine; sound-related addons will not work")},m=e=>{if(s)return;s=!0;const t=e.runtime.audioEngine;t?h(t):e.runtime.once("PROJECT_LOADED",(()=>{h(e.runtime.audioEngine)}))}},1418:function(e,t,n){"use strict";t.a={de:()=>n.e(61).then(n.t.bind(null,1428,3)),es:()=>n.e(62).then(n.t.bind(null,1429,3)),fi:()=>n.e(63).then(n.t.bind(null,1430,3)),fr:()=>n.e(64).then(n.t.bind(null,1431,3)),hu:()=>n.e(65).then(n.t.bind(null,1432,3)),it:()=>n.e(66).then(n.t.bind(null,1433,3)),ja:()=>n.e(67).then(n.t.bind(null,1434,3)),ko:()=>n.e(68).then(n.t.bind(null,1435,3)),nl:()=>n.e(69).then(n.t.bind(null,1436,3)),pl:()=>n.e(70).then(n.t.bind(null,1437,3)),pt:()=>n.e(71).then(n.t.bind(null,1438,3)),ro:()=>n.e(72).then(n.t.bind(null,1439,3)),ru:()=>n.e(73).then(n.t.bind(null,1440,3)),sl:()=>n.e(74).then(n.t.bind(null,1441,3)),tr:()=>n.e(75).then(n.t.bind(null,1442,3)),"zh-cn":()=>Promise.resolve().then(n.t.bind(null,1401,3)),"zh-tw":()=>n.e(76).then(n.t.bind(null,1443,3))}},1419:function(e,t,n){"use strict";t.a={"cat-blocks":()=>n.e(7).then(n.bind(null,1554)),"editor-devtools":()=>Promise.all([n.e(0),n.e(1)]).then(n.bind(null,1533)),"find-bar":()=>Promise.all([n.e(0),n.e(1)]).then(n.bind(null,1545)),"middle-click-popup":()=>Promise.all([n.e(0),n.e(1)]).then(n.bind(null,1535)),"jump-to-def":()=>n(1552),"reorder-custom-inputs":()=>Promise.all([n.e(0),n.e(1)]).then(n.bind(null,1546)),"editor-searchable-dropdowns":()=>Promise.all([n.e(0),n.e(1)]).then(n.bind(null,1555)),"data-category-tweaks-v2":()=>n.e(15).then(n.bind(null,1556)),"block-palette-icons":()=>n.e(5).then(n.bind(null,1531)),"hide-flyout":()=>n.e(34).then(n.bind(null,1538)),mediarecorder:()=>n.e(39).then(n.bind(null,1557)),"drag-drop":()=>n(1553),debugger:()=>n.e(16).then(n.bind(null,1529)),pause:()=>n(1537),"mute-project":()=>n(1544),"vol-slider":()=>n.e(59).then(n.bind(null,1536)),clones:()=>n.e(8).then(n.bind(null,1539)),"mouse-pos":()=>n.e(40).then(n.bind(null,1558)),"color-picker":()=>Promise.all([n.e(0),n.e(1)]).then(n.bind(null,1547)),"remove-sprite-confirm":()=>n.e(47).then(n.bind(null,1559)),"block-count":()=>n.e(4).then(n.bind(null,1560)),"onion-skinning":()=>Promise.all([n.e(0),n.e(1)]).then(n.bind(null,1534)),"paint-snap":()=>n.e(45).then(n.bind(null,1530)),"default-costume-editor-color":()=>n.e(17).then(n.bind(null,1561)),"bitmap-copy":()=>Promise.all([n.e(0),n.e(1)]).then(n.bind(null,1562)),"2d-color-picker":()=>Promise.all([n.e(0),n.e(2)]).then(n.bind(null,1540)),"paint-skew":()=>Promise.all([n.e(0),n.e(1)]).then(n.bind(null,1563)),"better-img-uploads":()=>n.e(3).then(n.bind(null,1548)),"pick-colors-from-stage":()=>Promise.all([n.e(0),n.e(1)]).then(n.bind(null,1564)),"custom-block-shape":()=>n.e(11).then(n.bind(null,1565)),"editor-square-inputs":()=>n.e(26).then(n.bind(null,1566)),"zebra-striping":()=>n.e(60).then(n.bind(null,1567)),"editor-compact":()=>n.e(22).then(n.bind(null,1541)),"custom-menu-bar":()=>n.e(13).then(n.bind(null,1486)),"editor-theme3":()=>n.e(29).then(n.bind(null,1528)),"custom-block-text":()=>n.e(12).then(n.bind(null,1568)),"editor-colored-context-menus":()=>n.e(21).then(n.bind(null,1569)),"editor-stage-left":()=>n.e(27).then(n.bind(null,1570)),"editor-buttons-reverse-order":()=>n.e(20).then(n.bind(null,1495)),"variable-manager":()=>n.e(58).then(n.bind(null,1542)),"search-sprites":()=>n.e(49).then(n.bind(null,1571)),"sprite-properties":()=>n.e(50).then(n.bind(null,1543)),gamepad:()=>n.e(32).then(n.bind(null,1532)),"editor-sounds":()=>n.e(25).then(n.bind(null,1572)),folders:()=>Promise.all([n.e(0),n.e(1)]).then(n.bind(null,1549)),"block-switching":()=>Promise.all([n.e(0),n.e(1)]).then(n.bind(null,1573)),"load-extensions":()=>n.e(38).then(n.bind(null,1574)),"custom-zoom":()=>n.e(14).then(n.bind(null,1575)),"copy-reporter":()=>n.e(10).then(n.bind(null,1550)),"initialise-sprite-position":()=>n.e(37).then(n.bind(null,1576)),blocks2image:()=>n.e(6).then(n.bind(null,1577)),"remove-curved-stage-border":()=>n.e(46).then(n.bind(null,1507)),"transparent-orphans":()=>n.e(52).then(n.bind(null,1509)),"paint-by-default":()=>n.e(44).then(n.bind(null,1578)),"block-cherry-picking":()=>Promise.all([n.e(0),n.e(1)]).then(n.bind(null,1579)),"hide-new-variables":()=>n.e(35).then(n.bind(null,1580)),"editor-extra-keys":()=>n.e(23).then(n.bind(null,1581)),"hide-delete-button":()=>n.e(33).then(n.bind(null,1511)),"no-script-bumping":()=>n.e(42).then(n.bind(null,1582)),"disable-stage-drag-select":()=>n.e(19).then(n.bind(null,1583)),"move-to-top-bottom":()=>Promise.all([n.e(0),n.e(1)]).then(n.bind(null,1584)),"move-to-top-layer":()=>n.e(41).then(n.bind(null,1585)),"disable-paste-offset":()=>n.e(18).then(n.bind(null,1586)),"block-duplicate":()=>Promise.all([n.e(0),n.e(1)]).then(n.bind(null,1587)),"rename-broadcasts":()=>Promise.all([n.e(0),n.e(1)]).then(n.bind(null,1588)),"swap-local-global":()=>n.e(51).then(n.bind(null,1589)),"editor-comment-previews":()=>Promise.all([n.e(0),n.e(1)]).then(n.bind(null,1590)),columns:()=>n.e(9).then(n.bind(null,1591)),"number-pad":()=>n.e(43).then(n.bind(null,1592)),"editor-number-arrow-keys":()=>n.e(24).then(n.bind(null,1593)),"expanded-backpack":()=>n.e(30).then(n.bind(null,1594)),"script-snap":()=>n.e(48).then(n.bind(null,1595)),fullscreen:()=>n.e(31).then(n.bind(null,1596)),"hide-stage":()=>n.e(36).then(n.bind(null,1551)),"tw-straighten-comments":()=>n.e(57).then(n.bind(null,1597)),"tw-remove-backpack":()=>n.e(55).then(n.bind(null,1598)),"tw-remove-feedback":()=>n.e(56).then(n.bind(null,1526)),"tw-disable-cloud-variables":()=>n.e(53).then(n.bind(null,1599)),"tw-disable-compiler":()=>n.e(54).then(n.bind(null,1600)),"editor-stepping":()=>n.e(28).then(n.bind(null,1601))}},1420:function(e,t,n){(e.exports=n(8)(!1)).push([e.i,".pause-btn {\n  width: 2rem;\n  height: 2rem;\n  padding: 0.375rem;\n  border-radius: 0.25rem;\n  user-select: none;\n  user-drag: none;\n  cursor: pointer;\n}\n\n.pause-btn:hover {\n  background-color: var(--looks-light-transparent);\n}\n",""])},1421:function(e,t,n){"use strict";function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function r(e,t,n){var s;return(t="symbol"==typeof(s=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var s=n.call(e,t||"default");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?s:s+"")in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,"a",(function(){return u}));let a=!1,i=!1,c=[];const l=function(e){var t,n,s,r,a,l;if(!e.target)return;const d=e.target.closest(".react-contextmenu-wrapper");if(!d)return;let u,p=d.querySelector("nav.react-contextmenu");const g={};if(null===(t=d[this.traps.getInternalKey(d)])||void 0===t||null===(n=t.return)||void 0===n||null===(s=n.return)||void 0===s||null===(r=s.return)||void 0===r||null===(a=r.stateNode)||void 0===a||null===(l=a.props)||void 0===l||!l.dragType)return;{const e=d[this.traps.getInternalKey(d)].return.return.return.stateNode.props;u=e.dragType.toLowerCase(),g.name=e.name,g.itemId=e.id,g.index=e.index}const h=o({menuItem:p,target:d,type:u},g);Array.from(p.children).forEach((e=>{e.classList.contains("sa-ctx-menu")&&e.remove()}));for(const e of i?c.flatMap((e=>"function"==typeof e?e(u,h):e)):c){if(!e)continue;if(e.types&&!e.types.some((e=>u===e)))continue;if(e.condition&&!e.condition(h))continue;const t=document.createElement("div"),n=["context-menu_menu-item"];e.border&&n.push("context-menu_menu-item-bordered"),e.dangerous&&n.push("context-menu_menu-item-danger"),t.className=this.scratchClass(...n,{others:["react-contextmenu-item","sa-ctx-menu",e.className||""]});const s=document.createElement("span");s.textContent=e.label,t.append(s),this.displayNoneWhileDisabled(t,{display:"block"}),t.addEventListener("click",(t=>{t.stopPropagation(),window.dispatchEvent(new CustomEvent("REACT_CONTEXTMENU_HIDE",{detail:{action:"REACT_CONTEXTMENU_HIDE"}})),e.callback(h)})),this.appendToSharedSpace({space:e.position,order:e.order,scope:p,element:t})}},d=e=>{a||(a=!0,document.body.addEventListener("contextmenu",(t=>l.call(e,t)),{capture:!0}))},u=(e,t,n)=>{void 0===n?(c.push(t),i=!0):c.push(o(o({},n),{},{callback:t})),d(e)}},1422:function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return l})),n.d(t,"c",(function(){return d}));var s=n(132),o=n.n(s),r=n(1423),a=n.n(r);const i=function(e,t){let{isOpen:n=!1}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const s=Object.assign(document.createElement("div"),{className:e.scratchClass("modal_modal-overlay"),dir:e.direction});s.style.display=n?"":"none",document.body.appendChild(s);const r=Object.assign(document.createElement("div"),{className:e.scratchClass("modal_modal-content")});r.addEventListener("click",(e=>e.stopPropagation())),s.appendChild(r);const i=Object.assign(document.createElement("div"),{className:e.scratchClass("modal_header")});r.appendChild(i),i.appendChild(Object.assign(document.createElement("div"),{className:e.scratchClass("modal_header-item","modal_header-item-title"),innerText:t}));const c=Object.assign(document.createElement("div"),{className:e.scratchClass("modal_header-item","modal_header-item-close")});i.appendChild(c);const l=Object.assign(document.createElement("div"),{className:e.scratchClass("close-button_close-button","close-button_large")});c.appendChild(l),l.appendChild(Object.assign(document.createElement("img"),{className:e.scratchClass("close-button_close-icon"),src:o.a}));const d=Object.assign(document.createElement("div"),{className:a.a.modalContent});return r.appendChild(d),{container:r,content:d,backdrop:s,closeButton:l,open:()=>{s.style.display=""},close:()=>{s.style.display="none"},remove:s.remove.bind(s)}},c=e=>{const t=Object.assign(document.createElement("div"),{className:e.scratchClass("prompt_button-row")}),n=Object.assign(document.createElement("button"),{className:e.scratchClass("prompt_cancel-button"),innerText:e.scratchMessage("gui.prompt.cancel")});t.appendChild(n);const s=Object.assign(document.createElement("button"),{className:e.scratchClass("prompt_ok-button"),innerText:e.scratchMessage("gui.prompt.ok")});return t.appendChild(s),{buttonRow:t,cancelButton:n,okButton:s}},l=function(e,t,n){let{useEditorClasses:s=!1}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const{remove:o,container:r,content:a,backdrop:i,closeButton:l}=e.createModal(t,{isOpen:!0,useEditorClasses:s,useSizesClass:!0}),d=null!==e.editorMode&&s?"editor":e.clientVersion;"editor"===d&&(r.classList.add(e.scratchClass("prompt_modal-content")),a.classList.add(e.scratchClass("prompt_body"))),a.appendChild(Object.assign(document.createElement("div"),{className:e.scratchClass("prompt_label"),innerText:n}));const{buttonRow:u,cancelButton:p,okButton:g}=c(e);return a.appendChild(u),g.focus(),new Promise((e=>{const t=()=>{o(),e(!1)},n=()=>{o(),e(!0)};i.addEventListener("click",t),l.addEventListener("click",t),p.addEventListener("click",t),g.addEventListener("click",n),r.addEventListener("keydown",(e=>{"Enter"===e.key&&n(),"Escape"===e.key&&t()}))}))},d=function(e,t,n){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",{useEditorClasses:o=!1}=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};const{remove:r,container:a,content:i,backdrop:l,closeButton:d}=e.createModal(t,{isOpen:!0,useEditorClasses:o,useSizesClass:!0});a.classList.add(e.scratchClass("prompt_modal-content")),i.classList.add(e.scratchClass("prompt_body")),i.appendChild(Object.assign(document.createElement("div"),{className:e.scratchClass("prompt_label"),innerText:n}));const u=Object.assign(document.createElement("input"),{className:e.scratchClass("prompt_variable-name-text-input"),value:s});i.appendChild(u),u.focus(),u.select();const{buttonRow:p,cancelButton:g,okButton:h}=c(e);return i.appendChild(p),new Promise((e=>{const t=()=>{r(),e(null)},n=()=>{r(),e(u.value)};l.addEventListener("click",t),d.addEventListener("click",t),g.addEventListener("click",t),h.addEventListener("click",n),a.addEventListener("keydown",(e=>{"Enter"===e.key&&n(),"Escape"===e.key&&t()}))}))}},1423:function(e,t,n){var s=n(1424);"string"==typeof s&&(s=[[e.i,s,""]]);var o={hmr:!0,transform:undefined,insertInto:void 0};n(9)(s,o);s.locals&&(e.exports=s.locals)},1424:function(e,t,n){(t=e.exports=n(8)(!1)).push([e.i,".modal_modal-content_vp9Mi {\n  background-color: var(--ui-modal-background);\n  color: var(--ui-modal-foreground);\n}\n",""]),t.locals={"modal-content":"modal_modal-content_vp9Mi",modalContent:"modal_modal-content_vp9Mi"}},1425:function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return r}));const s=document.createElement("div");s.style.display="none",s.className="addons-styles",document.body.appendChild(s);const o=new Map,r=()=>{for(const e of o.values())e.update()};class a{constructor(e){this.el=null,this.styleText=e,this.precedence=0,this.dependents=[],this.previousEnabledDependents=[]}addDependent(e,t,n){this.dependents.push([e,n]),t>this.precedence&&(this.precedence=t,this.el&&(this.el.dataset.precedence=t)),this.update()}getEnabledDependents(){const e=[];for(const[t,n]of this.dependents)n()&&e.push(t);return e}dependsOn(e){return this.dependents.some((t=>t[0]===e))}getElement(){if(!this.el){const e=document.createElement("style");e.className="scratch-addons-style",e.dataset.precedence=this.precedence,e.textContent=this.styleText,this.styleText=null,this.el=e}return this.el}update(){const e=this.getEnabledDependents();if(!((e,t)=>{if(e.length!==t.length)return!1;for(let n=0;n<e.length;e++)if(e[n]!==t[n])return!1;return!0})(e,this.previousEnabledDependents))if(this.previousEnabledDependents=e,e.length>0){const t=this.getElement();t.dataset.addons=e.join(",");for(const e of s.children){if((+e.dataset.precedence||0)>=this.precedence)return void s.insertBefore(t,e)}s.appendChild(t)}else this.el&&this.el.remove()}}const i=(e,t)=>{if(!o.get(e)){const n=new a(t);o.set(e,n)}return o.get(e)}},1426:function(e,t,n){"use strict";const s=["columns","editor-stage-left","editor-theme3","hide-stage"];t.a=e=>s.indexOf(e)+1},1427:function(e,t,n){"use strict";var s=n(366),o=n(86);class r extends s.a{constructor(){super(),this._isInReducer=!1,this._nextState=null,o.a.appStateReducer=(e,t,n)=>{this._isInReducer=!0,this._nextState=n,this.dispatchEvent(new CustomEvent("statechanged",{detail:{action:e,prev:t,next:n}})),this._nextState=null,this._isInReducer=!1}}initialize(){}dispatch(e){this._isInReducer?queueMicrotask((()=>o.a.appStateStore.dispatch(e))):o.a.appStateStore.dispatch(e)}get state(){return this._nextState?this._nextState:o.a.appStateStore.getState()}}const a=new r;t.a=a},1537:function(e,t,n){"use strict";n.r(t),n.d(t,"resources",(function(){return r}));var s=n(1390),o=n(1420);const r={"userscript.js":async function(e){let{addon:t,console:n,msg:o}=e;Object(s.f)(t);const r=document.createElement("img");r.className="pause-btn",r.draggable=!1,r.title=o("pause");const a=()=>{r.src=t.self.getResource(Object(s.b)()?"/play.svg":"/pause.svg"),r.title=Object(s.b)()?o("play"):o("pause")};for(r.addEventListener("click",(()=>Object(s.e)(!Object(s.b)()))),t.tab.displayNoneWhileDisabled(r),t.self.addEventListener("disabled",(()=>Object(s.e)(!1))),a(),Object(s.c)(a),document.addEventListener("keydown",(function(e){!e.altKey||"x"!==e.key.toLowerCase()&&88!==e.keyCode||t.self.disabled||(e.preventDefault(),e.stopImmediatePropagation(),Object(s.e)(!Object(s.b)()))}),{capture:!0});;)await t.tab.waitForElement("[class^='green-flag']",{markAsSeen:!0,reduxEvents:["scratch-gui/mode/SET_PLAYER","fontsLoaded/SET_FONTS_LOADED","scratch-gui/locales/SELECT_LOCALE"]}),t.tab.appendToSharedSpace({space:"afterGreenFlag",element:r,order:0})},"style.css":n.n(o).a,"pause.svg":"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMTgiIHdpZHRoPSIxOCI+PHBhdGggZD0iTTIzMS40MjkgMTg4LjkyOVYxNzEuMDdoNC4yODV2MTcuODU4em0xMi4xNDIgMFYxNzEuMDdoNC4yODZ2MTcuODU4eiIgdHJhbnNmb3JtPSJtYXRyaXgoMS4wMzMwOSAwIDAgLjk1NDI3IC0yMzguNTczIC0xNjIuNzY5KSIgZGF0YS1wYXBlci1kYXRhPSJ7JnF1b3Q7aXNQYWludGluZ0xheWVyJnF1b3Q7OnRydWV9IiBmaWxsPSIjZmZhZTAwIiBzdHJva2U9IiNkODk0MDAiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIgc3R5bGU9Im1peC1ibGVuZC1tb2RlOm5vcm1hbCIvPjwvc3ZnPg==","play.svg":"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMTgiIHdpZHRoPSIxOCI+PHBhdGggZD0ibTI0Ni4wNTUgMTgwLTEyLjExIDEyLjExdi0yNC4yMnoiIHRyYW5zZm9ybT0ibWF0cml4KDEuMTM5NDkgMCAwIC42Nzk0MyAtMjY0LjU5NSAtMTEzLjI5OCkiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIgc3Ryb2tlPSIjZDg5NDAwIiBmaWxsPSIjZmZhZTAwIiBkYXRhLXBhcGVyLWRhdGE9InsmcXVvdDtpc1BhaW50aW5nTGF5ZXImcXVvdDs6dHJ1ZX0iLz48L3N2Zz4="}},1544:function(e,t,n){"use strict";n.r(t),n.d(t,"resources",(function(){return o}));var s=n(1403);const o={"userscript.js":async function(e){let{addon:t,console:n}=e;const o=t.tab.traps.vm;Object(s.g)(o);const r=document.createElement("img");r.loading="lazy",r.src=t.self.getResource("/mute.svg"),r.className="sa-mute-project-icon",r.style.userSelect="none",t.tab.displayNoneWhileDisabled(r);const a=()=>{r.style.display=t.self.disabled||!Object(s.b)()?"none":""};Object(s.c)(a),a();const i=e=>{t.self.disabled||!e.ctrlKey&&!e.metaKey||(e.cancelBubble=!0,e.preventDefault(),Object(s.d)(!Object(s.b)()))};for(t.self.addEventListener("disabled",(()=>{Object(s.b)()&&Object(s.d)(!1)}));;){let e=await t.tab.waitForElement("[class^='green-flag_green-flag']",{markAsSeen:!0,reduxEvents:["scratch-gui/mode/SET_PLAYER","fontsLoaded/SET_FONTS_LOADED","scratch-gui/locales/SELECT_LOCALE"]});t.tab.appendToSharedSpace({space:"afterStopButton",element:r,order:0}),e.addEventListener("click",i),e.addEventListener("contextmenu",i)}},"mute.svg":"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iMjBweCIgaGVpZ2h0PSIyMHB4IiB2aWV3Qm94PSIwIDAgMjAgMjAiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+CiAgICA8IS0tIEdlbmVyYXRvcjogU2tldGNoIDU1LjIgKDc4MTgxKSAtIGh0dHBzOi8vc2tldGNoYXBwLmNvbSAtLT4KICAgIDx0aXRsZT5Tb3VuZC9FZmZlY3RzL011dGU8L3RpdGxlPgogICAgPGRlc2M+Q3JlYXRlZCB3aXRoIFNrZXRjaC48L2Rlc2M+CiAgICA8ZyBpZD0iU291bmQvRWZmZWN0cy9NdXRlIiBzdHJva2U9Im5vbmUiIHN0cm9rZS13aWR0aD0iMSIgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj4KICAgICAgICA8cGF0aCBmaWxsPSIjQ0Y2M0NGIiBkPSJNMTMuNDU0MTc0OSw1LjA0ODE1MjQzIEwxNS42MjgxMTY4LDIuODc0MjEwNTQgQzE1LjkyMTAxLDIuNTgxMzE3MzIgMTYuMzk1ODgzNywyLjU4MTMxNzMyIDE2LjY4ODc3NywyLjg3NDIxMDU0IEMxNi45ODE2NzAyLDMuMTY3MTAzNzYgMTYuOTgxNjcwMiwzLjY0MTk3NzQ5IDE2LjY4ODc3NywzLjkzNDg3MDcxIEw0LjUzMDMzMDA5LDE2LjA5MzMxNzYgQzQuMjM3NDM2ODcsMTYuMzg2MjEwOCAzLjc2MjU2MzEzLDE2LjM4NjIxMDggMy40Njk2Njk5MSwxNi4wOTMzMTc2IEMzLjE3Njc3NjcsMTUuODAwNDI0NCAzLjE3Njc3NjcsMTUuMzI1NTUwNiAzLjQ2OTY2OTkxLDE1LjAzMjY1NzQgTDYuMzEyMTQ5MzIsMTIuMTkwMTc4IEM2LjEyNDExOTEsMTIuMDYyMTM3OSA2LDExLjg0NjMzMzEgNiwxMS42MDI5ODc1IEw2LDguNjM3NDg3NSBDNiw4LjI0NzExMjUgNi4zMTk0MTUyNyw3LjkyNzYxMjUgNi43MDk2ODY3NSw3LjkyNzYxMjUgTDcuMDI0NjAzMjIsNy45Mjc2MTI1IEM4Ljc1Nzc2ODQ4LDcuOTI3NjEyNSAxMC4yOTQxMTEsNi44MTM4NjI1IDEwLjgzMzk2NzgsNS4xNjY4NjI1IEMxMC45Mjk1Njc0LDQuODc0MzYyNSAxMS4yMDE3NDUyLDQuNjc3NDg3NSAxMS41MDc2NjQxLDQuNjc3NDg3NSBMMTIuODMxNDM3OSw0LjY3NzQ4NzUgQzEzLjEwMDI4NDQsNC42Nzc0ODc1IDEzLjMzNDEwNzUsNC44MjcxNzIwOCAxMy40NTQxNzQ5LDUuMDQ4MTUyNDMgWiBNMTMuNTQsOS4wODM2NDc3MSBMMTMuNTQsMTQuODUzMTEyNSBDMTMuNTQsMTUuMjQ1NzM3NSAxMy4yMjI4MzQxLDE1LjU2Mjk4NzUgMTIuODMxNDM3OSwxNS41NjI5ODc1IEwxMS41MDc2NjQxLDE1LjU2Mjk4NzUgQzExLjIwMTc0NTIsMTUuNTYyOTg3NSAxMC45Mjk1Njc0LDE1LjM2NjExMjUgMTAuODMzOTY3OCwxNS4wNzM2MTI1IEMxMC41NzczNzg1LDE0LjI5MDgwNzcgMTAuMDk1NjgxMywxMy42Mjg0NjUgOS40NzQ3MzUzMSwxMy4xNDg5MTI0IEwxMy41NCw5LjA4MzY0NzcxIFoiIGlkPSJwYXRoLTEiPjwvcGF0aD4KICAgIDwvZz4KPC9zdmc+Cg=="}},1552:function(e,t,n){"use strict";n.r(t),n.d(t,"resources",(function(){return o}));var s=n(1399);const o={"userscript.js":async function(e){let{addon:t,msg:n,console:o}=e;const r=new s.a(t),a=await t.tab.traps.getBlockly();Object.defineProperty(a.Gesture.prototype,"jumpToDef",{get:()=>!t.self.disabled});const i=a.Gesture.prototype.doBlockClick_;a.Gesture.prototype.doBlockClick_=function(){if(!t.self.disabled&&(1===this.mostRecentEvent_.button||this.mostRecentEvent_.shiftKey)){let e=this.startBlock_;for(;e;e=e.getSurroundParent())if("procedures_call"===e.type){let t=e.getProcCode(),n=r.getWorkspace().getTopBlocks();for(const e of n)if("procedures_definition"===e.type){let n=e.getChildren()[0].getProcCode();if(n&&n===t)return void r.scrollBlockIntoView(e)}}}i.call(this)}}}},1553:function(e,t,n){"use strict";n.r(t),n.d(t,"resources",(function(){return s}));const s={"userscript.js":async function(e){let{addon:t,console:n}=e,s=null;const o=new WeakMap,r=(e,t)=>{let n;o.has(e)?n=o.get(e):(n=e.animate([{},{backgroundColor:"hsla(0, 100%, 77%, 1)"}],{duration:250,fill:"forwards",easing:"ease"}),o.set(e,n)),n.playbackRate=t},a=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"value").set;document.addEventListener("dragover",(e=>{if(t.self.disabled)return;if(!e.dataTransfer.types.includes("Files"))return;let o,i;if((o=e.target.closest('div[class*="sprite-selector_sprite-selector"]'))||(o=e.target.closest('div[class*="stage-selector_stage-selector"]'))||(o=e.target.closest('div[class*="selector_wrapper"]'))?i=e=>{const n=t.settings.get("use-hd-upload")?"":":not(.sa-better-img-uploads-input)",s=o.querySelector('input[class*="action-menu_file-input"]'+n);s.files=e,s.dispatchEvent(new Event("change",{bubbles:!0}))}:(o=e.target.closest('div[class*="monitor_list-monitor"]'))?i=e=>{const t=document.querySelector("body > .react-contextmenu.react-contextmenu--visible");o.dispatchEvent(new MouseEvent("contextmenu",{bubbles:!0}));const s=document.querySelector("body > .react-contextmenu.react-contextmenu--visible"),r=null===s?t:s;r.style.display="none";const a=document.body.appendChild;document.body.appendChild=t=>{if(document.body.appendChild=a,!(t instanceof HTMLInputElement))return n.error('File input was not immediately given to appendChild upon clicking "Import"!'),a(t);document.body.appendChild(t),t.click=()=>{},t.files=e,t.dispatchEvent(new Event("change")),window.requestAnimationFrame((()=>{window.requestAnimationFrame((()=>{r.style.display=null,r.style.opacity=0,r.style.pointerEvents="none"}))}))},r.children[0].click()}:(o=e.target.closest('div[class*="question_question-input"] > input[class*="input_input-form_l9eYg"]'))&&(i=async e=>{const t=(await Promise.all(Array.from(e,(e=>e.text())))).join("").replace(/[\r\n]+$/,"").replace(/\r?\n|\r/g," "),n=o.selectionStart;((e,t)=>{a.call(e,t),e.dispatchEvent(new Event("change",{bubbles:!0}))})(o,o.value.slice(0,n)+t+o.value.slice(o.selectionEnd)),o.setSelectionRange(n,n+t.length)}),!o)return;if(e.preventDefault(),o===s)return;s=o;const c=[o,o.querySelector('div[class*="stage-selector_header_"]'),o.querySelector('div[class*="sprite-info_sprite-info"]'),o.querySelector('div[class*="monitor_list-body"]')].filter((e=>e));for(const e of c)r(e,1);const l=e=>{e.preventDefault(),p(),e.dataTransfer.types.includes("Files")&&e.dataTransfer.files.length>0&&i(e.dataTransfer.files)},d=e=>{e.preventDefault(),e.dataTransfer.dropEffect="copy"};e.dataTransfer.dropEffect="copy";const u=e=>{e.preventDefault(),p()},p=()=>{s=null,o.removeEventListener("dragover",d),o.removeEventListener("dragleave",u),o.removeEventListener("drop",l);for(const e of c)r(e,-1)};o.addEventListener("dragover",d),o.addEventListener("dragleave",u),o.addEventListener("drop",l)}),{useCapture:!0})}}},1606:function(e,t,n){"use strict";n.r(t),function(e){var t=n(138),s=n.n(t),o=n(50),r=n(431),a=n(366),i=n(86),c=n(89),l=n(1401),d=n(1418),u=n(1419),p=n(1421),g=n(1422),h=n(1395),m=n(1425),b=n(1426),f=n(1427);const y=e=>e.replace(/([<>'"&])/g,((e,t)=>"&#".concat(t.charCodeAt(0),";"))),k=e=>e.replace(/-([a-z])/g,(e=>e[1].toUpperCase()));let v=null;let w,M=[];const _=e=>{M=M.filter((t=>t!==e))};var E=f.a.state.locales.locale.split("-")[0];d.a[E]||(E=f.a.state.locales.locale);const C=(async()=>{if(d.a[E]){const e=await d.a[E]();Object.assign(l,e)}})(),x=e=>"addons-display-none-".concat(e),N=e=>e.split(/(?=[^\\]%[nbs])/g).map((e=>e.trim())).filter((e=>"%"===e.charAt(0))).map((e=>e.substring(0,2)));let T=!1;const I=[],S=["editor-devtools","block-switching","blocks2image","swap-local-global"];let j=!1;const D=()=>{const e=f.a.state,t="small"===e.scratchGui.stageSize.stageSize,n=e.scratchGui.mode.isFullScreen,s=e.scratchGui.mode.isPlayerOnly;document.body.classList.toggle("sa-small-stage",t&&!n&&!s),document.body.classList.toggle("sa-body-editor",!s||n)};f.a.addEventListener("statechanged",(e=>{"scratch-gui/StageSize/SET_STAGE_SIZE"!==e.detail.action.type&&"scratch-gui/mode/SET_FULL_SCREEN"!==e.detail.action.type&&"scratch-gui/mode/SET_PLAYER"!==e.detail.action.type||D()})),D();const O=e=>Object.keys(e).find((e=>e.startsWith("__reactInternalInstance$")));class L extends a.a{constructor(e){super(),this._id=e,this._seenElements=new WeakSet,this.traps={get vm(){return f.a.state.scratchGui.vm},getBlockly:()=>i.a.blockly?Promise.resolve(i.a.blockly):new Promise((e=>{i.a.blocklyCallbacks.push((()=>e(i.a.blockly)))})),getWorkspace:()=>i.a.blocklyWorkspace,getPaper:async()=>{const e=await this.waitForElement("[class*='paint-editor_mode-selector']",{reduxCondition:e=>1===e.scratchGui.editorTab.activeTabIndex&&!e.scratchGui.mode.isPlayerOnly});let t,n=e[Object.keys(e).find((e=>e.startsWith("__reactInternalInstance$")))].child;for(;n;){const e=n.child.stateNode;if(e.tool){t=e.tool;break}if(e.blob&&e.blob.tool){t=e.blob.tool;break}n=n.sibling}if(t){return t._scope}throw new Error("cannot find paper :(")},getInternalKey:O}}get redux(){return f.a}waitForElement(e){let{markAsSeen:t=!1,condition:n,reduxCondition:s,reduxEvents:o}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=!0;const a=()=>!!r&&(!(n&&!n())&&!(s&&!s(f.a.state)));if(a()){const n=document.querySelectorAll(e);for(const e of n)if(!this._seenElements.has(e))return t&&this._seenElements.add(e),Promise.resolve(e)}let i;return o&&(r=!1,i=e=>{let{detail:t}=e;const n=t.action.type;o.includes(n)&&"fontsLoaded/SET_FONTS_LOADED"!==n&&(r=!0)},this.redux.initialize(),this.redux.addEventListener("statechanged",i)),new Promise((n=>{const s=()=>{if(!a())return;const o=document.querySelectorAll(e);for(const e of o)if(!this._seenElements.has(e)){n(e),_(s),t&&this._seenElements.add(e),i&&this.redux.removeEventListener("statechanged",i);break}};var o;o=s,w||(w=new MutationObserver((()=>{for(const e of M)e()})),w.observe(document.documentElement,{attributes:!1,childList:!0,subtree:!0})),M.push(o)}))}appendToSharedSpace(e){let{space:t,element:n,order:s,scope:o}=e;const r=document.querySelector.bind(document),a={stageHeader:{element:()=>r("[class^='stage-header_stage-size-row']"),from:()=>[],until:()=>[r("[class^='stage-header_stage-size-toggle-group']"),r("[class^='stage-header_stage-size-row']").lastChild]},fullscreenStageHeader:{element:()=>r("[class^='stage-header_fullscreen-buttons-row_']"),from:()=>[],until:()=>[r("[class^='stage-header_fullscreen-buttons-row_']").lastChild]},afterGreenFlag:{element:()=>r("[class^='controls_controls-container']"),from:()=>[],until:()=>[r("[class^='stop-all_stop-all']")]},afterStopButton:{element:()=>r("[class^='controls_controls-container']"),from:()=>[r("[class^='stop-all_stop-all']")],until:()=>[]},afterSoundTab:{element:()=>r("[class^='react-tabs_react-tabs__tab-list']"),from:()=>[r("[class^='react-tabs_react-tabs__tab-list']").children[2]],until:()=>[r(".sa-find-bar")]},assetContextMenuAfterExport:{element:()=>o,from:()=>Array.prototype.filter.call(o.children,(e=>e.textContent===this.scratchMessage("gui.spriteSelectorItem.contextMenuExport"))),until:()=>Array.prototype.filter.call(o.children,(e=>e.textContent===this.scratchMessage("gui.spriteSelectorItem.contextMenuDelete")))},assetContextMenuAfterDelete:{element:()=>o,from:()=>Array.prototype.filter.call(o.children,(e=>e.textContent===this.scratchMessage("gui.spriteSelectorItem.contextMenuDelete"))),until:()=>[]},monitor:{element:()=>o,from:()=>{const e=[this.scratchMessage("gui.monitor.contextMenu.large"),this.scratchMessage("gui.monitor.contextMenu.slider"),this.scratchMessage("gui.monitor.contextMenu.sliderRange"),this.scratchMessage("gui.monitor.contextMenu.export")],t=Array.prototype.filter.call(o.children,(t=>e.includes(t.textContent)));return[t[t.length-1]]},until:()=>[]},paintEditorZoomControls:{element:()=>r(".sa-paintEditorZoomControls-wrapper")||(()=>{const e=Object.assign(document.createElement("div"),{className:"sa-paintEditorZoomControls-wrapper"});e.style.display="flex",e.style.flexDirection="row-reverse",e.style.height="calc(1.95rem + 2px)";const t=r("[class^='paint-editor_zoom-controls']");return t.replaceWith(e),e.appendChild(t),e})(),from:()=>[],until:()=>[]}}[t],i=a.element();if(!i)return!1;const c=a.from(),l=a.until();n.dataset.saSharedSpaceOrder=s;let d=!1;0===c.length&&(d=!0);let u=null;const p=Array.from(i.children);for(const e of p.keys()){const t=p[e],n=Number(e);if(d){if(l.includes(t)){u=0===n?-1:p[n-1];break}if(t.dataset.saSharedSpaceOrder&&Number(t.dataset.saSharedSpaceOrder)>s){u=0===n?-1:p[n-1];break}}else c.includes(t)&&(d=!0)}return!!d&&(null===u?i.appendChild(n):-1===u?i.prepend(n):i.insertBefore(n,u.nextSibling),!0)}addBlock(e,t){let{args:n,displayName:s,callback:o}=t;const r=N(e);if(n.length!==r.length)throw new Error("Procedure code and argument list do not match");if(s){s=(e=>e.replace(/([^\s])(%[nbs])/g,((e,t,n)=>"".concat(t," ").concat(n))))(s);const t=N(s);a=r,i=t,JSON.stringify(a)!==JSON.stringify(i)&&(console.warn("displayName ".concat(s," for ").concat(e," has invalid arguments, ignoring it.")),s=e)}else s=e;var a,i;const c=this.traps.vm;c.addAddonBlock({procedureCode:e,arguments:n,callback:(e,t)=>o(e,t.thread),displayName:s}),T||(T=!0,this.traps.getBlockly().then((e=>{const t=e.BlockSvg,n=t.prototype.updateColour;t.prototype.updateColour=function(){if(!this.isInsertionMarker()&&"procedures_call"===this.type){if(this.procCode_&&c.runtime.getAddonBlock(this.procCode_)){const e=f.a.state.scratchGui.theme.theme.getBlockColors().addons;this.colour_=e.primary,this.colourSecondary_=e.secondary,this.colourTertiary_=e.tertiary,this.colourQuaternary_=e.quaternary,this.customContextMenu=null}}for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return n.call(this,...t)};const s=e.Blocks.procedures_call.createAllInputs_;e.Blocks.procedures_call.createAllInputs_=function(){const e=this.procCode_&&c.runtime.getAddonBlock(this.procCode_);for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];if(e&&e.displayName){const t=this.procCode_;this.procCode_=e.displayName;const o=s.call(this,...n);return this.procCode_=t,o}return s.call(this,...n)},c.editingTarget&&c.emitWorkspaceUpdate()})))}getCustomBlock(e){return this.traps.vm.getAddonBlock(e)}createBlockContextMenu(e){let{workspace:t=!1,blocks:n=!1,flyout:s=!1,comments:o=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};I.push({addonId:this._id,callback:e,workspace:t,blocks:n,flyout:s,comments:o}),I.sort(((e,t)=>S.indexOf(e.addonId)-S.indexOf(t.addonId))),j||(j=!0,this.traps.getBlockly().then((e=>{const t=e.ContextMenu.show;e.ContextMenu.show=function(n,s,o){const r=e.mainWorkspace.currentGesture_,a=r.targetBlock_;for(const{callback:e,workspace:t,blocks:n,flyout:o,comments:i}of I){if(t&&!a&&!r.flyout_&&!r.startBubble_||n&&a&&!r.flyout_||o&&r.flyout_||i&&r.startBubble_)try{s=e(s,a)}catch(e){console.error("Error while calling context menu callback: ",e)}}t.call(this,n,s,o);const i=e.WidgetDiv.DIV.firstChild;s.forEach(((e,t)=>{if(0!==t&&e.separator){const e=i.children[t];e.style.paddingTop="2px",e.classList.add("sa-blockly-menu-item-border"),e.style.borderTop="1px solid var(--ui-black-transparent)"}}))}})))}createEditorContextMenu(e,t){Object(p.a)(this,e,t)}copyImage(e){if(!navigator.clipboard.write)return Promise.reject(new Error("Clipboard API not supported"));const t=[new ClipboardItem({"image/png":Object(r.a)(e)})];return navigator.clipboard.write(t)}scratchMessage(e){return f.a.state.locales.messages[e]}scratchClassReady(){return Promise.resolve()}scratchClass(){const e=(()=>{if(v)return v;const e=Array.from(document.styleSheets).filter((e=>!(e.ownerNode.textContent.startsWith("/* DO NOT EDIT\n@todo This file is copied from GUI and should be pulled out into a shared library.")&&(e.ownerNode.textContent.includes("input_input-form")||e.ownerNode.textContent.includes("label_input-group_"))))).map((e=>{try{return[...e.cssRules]}catch(e){return[]}})).flat().map((e=>e.selectorText)).filter((e=>e)).map((e=>e.match(/(([\w-]+?)_([\w-]+)_([\w\d-]+))/g))).filter((e=>e)).flat();v=[...new Set(e)];const t=new MutationObserver((e=>{for(const n of e)for(const e of n.addedNodes)if("STYLE"===e.tagName)return v=null,void t.disconnect()}));return t.observe(document.head,{childList:!0}),v})(),t=[];for(var n=arguments.length,s=new Array(n),o=0;o<n;o++)s[o]=arguments[o];for(const n of s)if("string"==typeof n)for(const s of e)if(s.startsWith("".concat(n,"_"))&&s.length===n.length+6){t.push(s);break}const r=s[s.length-1];if("object"==typeof r){const e=Array.isArray(r.others)?r.others:[r.others];for(const n of e)t.push(n)}return t.join(" ")}get editorMode(){return(()=>{const e=f.a.state.scratchGui.mode;return e.isEmbedded?"embed":e.isFullScreen?"fullscreen":e.isPlayerOnly?"projectpage":"editor"})()}displayNoneWhileDisabled(e,t){e.classList.add(x(this._id)),t&&t.display&&(e.style.display=t.display)}get direction(){return this.redux.state.locales.isRtl?"rtl":"ltr"}createModal(e){let{isOpen:t=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return g.b(this,e,{isOpen:t})}confirm(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return g.a(this,...t)}prompt(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return g.c(this,...t)}recolorable(){const e=document.createElement("img");let t="";const n=()=>{const n=t.replace(/#855cd6/gi,window.Recolor.primary);Object.getOwnPropertyDescriptor(window.HTMLImageElement.prototype,"src").set.call(e,"data:image/svg+xml;,".concat(encodeURIComponent(n)))};return Object.defineProperty(e,"src",{get:()=>t?"data:image/svg+xml;,".concat(encodeURIComponent(t)):"",set:e=>{const s=e.split(";base64,")[1];t=atob(s),n()}}),i.a.recolorCallbacks.push(n),e}}class P extends a.a{constructor(e,t){super(),this._addonId=e,this._manifest=t}get(e){return o.a.getAddonSetting(this._addonId,e)}}class A extends a.a{constructor(e,t){super(),this.id=e,this.disabled=!1,this.getResource=t}}class z{constructor(t){z.instances.push(this);const n=c.a[t];this.id=t,this.manifest=n,this.messageCache={},this.loading=!0,this.resources=null,this.publicAPI={global:e,console:console,addon:{tab:new L(t),settings:new P(t,n),self:new A(t,this.getResource.bind(this))},msg:this.msg.bind(this),safeMsg:this.safeMsg.bind(this)}}_msg(e,t,n){const o=e.startsWith("/")?e.substring(1):"".concat(this.id,"/").concat(e);if(this.messageCache[o])return this.messageCache[o].format(t);let r=l[o];if(!r)return o;n&&(r=n(r));const a=new s.a(r,E);return this.messageCache[o]=a,a.format(t)}msg(e,t){return this._msg(e,t,null)}safeMsg(e,t){return this._msg(e,t,y)}getResource(e){const t=e.substring(1),n=this.resources[t];if("string"!=typeof n)throw new Error("Unknown asset: ".concat(e));return n}updateAllStyles(){m.b(),this.updateCssVariables()}updateCssVariables(){const e=k(this.id);if(this.manifest.settings)for(const t of this.manifest.settings){const n=t.id,s="--".concat(e,"-").concat(k(n)),o=this.publicAPI.addon.settings.get(n);document.documentElement.style.setProperty(s,o)}if(this.manifest.customCssVariables)for(const t of this.manifest.customCssVariables){const n=t.name,s="--".concat(e,"-").concat(n),o=t.value,r=this.evaluateCustomCssVariable(o);document.documentElement.style.setProperty(s,r)}}evaluateCustomCssVariable(e){if("object"!=typeof e||null===e)return e;switch(e.type){case"alphaBlend":{const t=this.evaluateCustomCssVariable(e.opaqueSource),n=this.evaluateCustomCssVariable(e.transparentSource);return h.a(t,n)}case"alphaThreshold":{const t=this.evaluateCustomCssVariable(e.source);return h.e(t).a>=(this.evaluateCustomCssVariable(e.threshold)||.5)?this.evaluateCustomCssVariable(e.opaque):this.evaluateCustomCssVariable(e.transparent)}case"brighten":{const t=this.evaluateCustomCssVariable(e.source);return h.b(t,e)}case"makeHsv":{const t=this.evaluateCustomCssVariable(e.h),n=this.evaluateCustomCssVariable(e.s),s=this.evaluateCustomCssVariable(e.v);return h.c(t,n,s)}case"map":return e.options[this.evaluateCustomCssVariable(e.source)];case"multiply":{const t=this.evaluateCustomCssVariable(e.source);return h.d(t,e)}case"recolorFilter":{const t=this.evaluateCustomCssVariable(e.source);return h.f(t)}case"settingValue":return this.publicAPI.addon.settings.get(e.settingId);case"ternary":{const t=this.evaluateCustomCssVariable(e.source);return this.evaluateCustomCssVariable(t?e.true:e.false)}case"textColor":{const t=this.evaluateCustomCssVariable(e.source),n=this.evaluateCustomCssVariable(e.black),s=this.evaluateCustomCssVariable(e.white),o=this.evaluateCustomCssVariable(e.threshold);return h.h(t,n,s,o)}}return console.warn("Unknown customCssVariable",e),"#000000"}settingsChanged(){this.updateAllStyles(),this.publicAPI.addon.settings.dispatchEvent(new CustomEvent("change"))}dynamicEnable(){this.loading||(this.publicAPI.addon.self.disabled=!1,this.updateAllStyles(),this.publicAPI.addon.self.dispatchEvent(new CustomEvent("reenabled")))}dynamicDisable(){this.loading||(this.publicAPI.addon.self.disabled=!0,this.updateAllStyles(),this.publicAPI.addon.self.dispatchEvent(new CustomEvent("disabled")))}async run(){this.manifest.editorOnly&&await(()=>{if(f.a.state.scratchGui.mode.isPlayerOnly&&!f.a.state.scratchGui.mode.isEmbedded)return new Promise((e=>{const t=()=>{f.a.state.scratchGui.mode.isPlayerOnly||(e(),f.a.removeEventListener("statechanged",t))};f.a.initialize(),f.a.addEventListener("statechanged",t)}))})();const e=await u.a[this.id]();this.resources=e.resources,this.manifest.noTranslations||await C;const t=100*Object(b.a)(this.id);if(this.manifest.userstyles)for(let e=0;e<this.manifest.userstyles.length;e++){const n=this.manifest.userstyles[e],s=t+e,r=()=>!this.publicAPI.addon.self.disabled&&o.a.evaluateCondition(this.id,n.if);for(const[e,t]of this.resources[n.url]){m.a(e,t).addDependent(this.id,s,r)}}const n=".".concat(x(this.id),"{display:none !important;}");if(m.a("_disabled/".concat(this.id),n).addDependent(this.id,t,(()=>this.publicAPI.addon.self.disabled)),this.updateCssVariables(),this.manifest.userscripts)for(const e of this.manifest.userscripts){if(!o.a.evaluateCondition(e.if))continue;(0,this.resources[e.url])(this.publicAPI)}this.loading=!1}}z.instances=[];const B=e=>{new z(e).run()};o.a.addEventListener("addon-changed",(e=>{const t=e.detail.addonId,n=z.instances.find((e=>e.id===t));n&&n.settingsChanged(),e.detail.dynamicEnable?n?n.dynamicEnable():B(t):e.detail.dynamicDisable&&n&&n.dynamicDisable()}));for(const e of Object.keys(c.a))o.a.getAddonEnabled(e)&&B(e)}.call(this,n(52))}}]);